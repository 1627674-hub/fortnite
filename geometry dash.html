<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Simple Platformer</title>
<style>
  canvas {
    background: #87CEEB; /* sky blue */
    display: block;
    margin: 0 auto;
    border: 2px solid #000;
  }
</style>
</head>
<body>
<canvas id="game" width="600" height="400"></canvas>
<script>
  const canvas = document.getElementById('game');
  const ctx = canvas.getContext('2d');

  const gravity = 0.5;
  const friction = 0.8;

  // Player object
  const player = {
    x: 50,
    y: 0,
    width: 40,
    height: 60,
    velocityX: 0,
    velocityY: 0,
    speed: 5,
    jumping: false
  };

  // Platforms array
  const platforms = [
    { x: 0, y: 360, width: 600, height: 40 },    // ground
    { x: 150, y: 300, width: 100, height: 20 },
    { x: 300, y: 250, width: 100, height: 20 },
    { x: 450, y: 200, width: 100, height: 20 }
  ];

  // Keys state
  const keys = {};

  // Key listeners
  window.addEventListener('keydown', (e) => {
    keys[e.code] = true;
  });

  window.addEventListener('keyup', (e) => {
    keys[e.code] = false;
  });

  function gameLoop() {
    // Clear canvas
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Move left/right
    if (keys['ArrowRight']) {
      player.velocityX = player.speed;
    } else if (keys['ArrowLeft']) {
      player.velocityX = -player.speed;
    } else {
      player.velocityX *= friction;
    }

    // Jumping
    if (keys['Space'] || keys['ArrowUp']) {
      if (!player.jumping) {
        player.velocityY = -12;
        player.jumping = true;
      }
    }

    // Apply gravity
    player.velocityY += gravity;

    // Update player position
    player.x += player.velocityX;
    player.y += player.velocityY;

    // Prevent going off screen horizontally
    if (player.x < 0) player.x = 0;
    if (player.x + player.width > canvas.width) player.x = canvas.width - player.width;

    // Platform collision detection
    player.jumping = true; // Assume player is in air until collision is detected
    for (let platform of platforms) {
      if (
        player.x < platform.x + platform.width &&
        player.x + player.width > platform.x &&
        player.y + player.height > platform.y &&
        player.y + player.height < platform.y + platform.height
      ) {
        // Land on platform
        player.y = platform.y - player.height;
        player.velocityY = 0;
        player.jumping = false;
      }
    }

    // Draw platforms
    ctx.fillStyle = '#654321'; // brown
    for (let platform of platforms) {
      ctx.fillRect(platform.x, platform.y, platform.width, platform.height);
    }

    // Draw player
    ctx.fillStyle = '#FF0000'; // red
    ctx.fillRect(player.x, player.y, player.width, player.height);

    requestAnimationFrame(gameLoop);
  }

  // Start game loop
  gameLoop();
</script>
</body>
</html>
